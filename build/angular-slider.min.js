/*
 angular-slider v0.3.2
 (c) 2013-2014 Venturocket, Inc. http://github.com/Venturocket
 License: MIT
*/
window.AngularSlider=function(a,b,c){function u(a){i.cssText=a}function w(a,b){return typeof a===b}function z(){e.inputtypes=function(a){for(var e,g,h,d=0,i=a.length;i>d;d++)j.setAttribute("type",g=a[d]),e="text"!==j.type,e&&(j.value=k,j.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(g)&&j.style.WebkitAppearance!==c?(f.appendChild(j),h=b.defaultView,e=h.getComputedStyle&&"textfield"!==h.getComputedStyle(j,null).WebkitAppearance&&0!==j.offsetHeight,f.removeChild(j)):/^(search|tel)$/.test(g)||(e=/^(url|email)$/.test(g)?j.checkValidity&&j.checkValidity()===!1:j.value!=k)),n[a[d]]=!!e;return n}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r,t,d="2.7.1",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j=b.createElement("input"),k=":)",m=({}.toString,{}),n={},p=[],q=p.slice,s={}.hasOwnProperty;t=w(s,"undefined")||w(s.call,"undefined")?function(a,b){return b in a&&w(a.constructor.prototype[b],"undefined")}:function(a,b){return s.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=q.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(q.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(q.call(arguments)))};return d});for(var A in m)t(m,A)&&(r=A.toLowerCase(),e[r]=m[A](),p.push((e[r]?"":"no-")+r));return e.input||z(),e.addTest=function(a,b){if("object"==typeof a)for(var d in a)t(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},u(""),h=j=null,e._version=d,e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};B=function(a){function b(a){var e,f,g,a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a};for(f=0;d>f;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;b>f;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script"),e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),AngularSlider.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},angular.module("vr.directives.slider",["ngTouch"]).directive("slider",["$timeout","$document","$interpolate","$swipe",function(a,b,c,d){function h(a){return angular.element(a)}function i(a){return""+a+"px"}function j(a,b){return a.css({opacity:b})}function k(a){return j(a,0)}function l(a){return j(a,1)}function m(a,b){return a.css({left:b})}function n(a){var b=parseFloat(a.css("width"));return isNaN(b)?a[0].offsetWidth:b}function o(a){return n(a)/2}function p(a){try{return a.offset().left}catch(b){}return a[0].getBoundingClientRect().left}function q(a,b){return p(a)>p(b)?p(a)-p(b)-n(b):p(b)-p(a)-n(a)}function r(a,b){return a.attr("ng-bind-template",b)}function s(a,b,c,d,e){(angular.isUndefined(b)||!b)&&(b=0),(angular.isUndefined(c)||!c||0==c)&&(c=1/Math.pow(10,b)),(angular.isUndefined(d)||!d)&&(d=0),(angular.isUndefined(a)||!a)&&(a=0);var f=(a-d)%c,g=f>c/2?a+c-f:a-f;return(angular.isUndefined(e)||!e)&&(e=g),g=Math.min(Math.max(g,d),e),parseFloat(g.toFixed(b))}function t(a,b){return Math.floor(a/b+.5)*b}function u(a,b){return a>0&&!isNaN(b)?Math.ceil(b/a)*a:b}function v(a){return f+" "+a+" "+g}var e=3,f=c.startSymbol(),g=c.endSymbol();return{restrict:"EA",require:"ngModel",scope:{floor:"@",ceiling:"@",step:"@",stepWidth:"@",precision:"@",buffer:"@",stickiness:"@",showSteps:"@",ngModel:"=",ngModelRange:"=",ngDisabled:"=",ngChange:"&",translateFn:"&",translateRangeFn:"&",translateCombinedFn:"&",scaleFn:"&",inverseScaleFn:"&"},template:"<span class='bar full'></span><span class='bar steps'><span class='bubble step' ng-repeat='step in stepBubbles()'></span></span><span class='bar selection'></span><span class='bar unselected low'></span><span class='bar unselected high'></span><span class='pointer low'></span><span class='pointer high'></span><span class='bubble low'></span><span class='bubble high'></span><span class='bubble middle'></span><span class='bubble selection'></span><span class='bubble limit floor'></span><span class='bubble limit ceiling'></span><input type='range' class='input low' /><input type='range' class='input high' /><input type='range' class='input selection' />",compile:function(c,f){function C(a){a||(a=c);var b=[];return angular.forEach(a.children(),function(a){b.push(h(a))}),b}function D(a,b,c){return{fullBar:a[0],stepBubs:a[1],selBar:b?a[2]:null,unSelBarLow:b?a[3]:null,unSelBarHigh:b?a[4]:null,minPtr:b?a[5]:a[2],maxPtr:b?a[6]:null,lowBub:b?a[7]:a[3],highBub:b?a[8]:null,cmbBub:b?a[9]:null,selBub:b?a[10]:null,flrBub:b?a[11]:a[4],ceilBub:b?a[12]:a[5],minInput:c?b?a[13]:a[6]:null,maxInput:c&&b?a[14]:null,selInput:c&&b?a[15]:null}}var g=f.showSteps,j=f.stepWidth?"stepWidth":"step",w=null!=f.ngModelRange,x={},y="ngModel",z="ngModelRange",A="selectBar",B=["floor","ceiling","stickiness",y];if(x=function(){for(var a=C(),b=[],c=0,d=a.length;d>c;c++){var e=a[c];e=h(e),e.css({"white-space":"nowrap",position:"absolute",display:"block","z-index":1}),b.push(e)}return b}(),x=D(x,!0,!0),f.translateFn&&f.$set("translateFn",""+f.translateFn+"(value)"),f.translateRangeFn&&f.$set("translateRangeFnFn",""+f.translateRangeFn+"(low,high)"),f.translateCombinedFn&&f.$set("translateCombinedFnFn",""+f.translateCombinedFn+"(low,high)"),f.scaleFn&&f.$set("scaleFn",""+f.scaleFn+"(value)"),f.inverseScaleFn&&f.$set("inverseScaleFn",""+f.inverseScaleFn+"(value)"),x.fullBar.css({left:0,right:0}),AngularSlider.inputtypes.range){var E={position:"absolute",margin:0,padding:0,opacity:0,height:"100%"};x.minInput.attr("step",v("inputSteps()")),x.minInput.attr("min",v("floor")),x.minInput.css(E),x.minInput.css("left",0),w?(x.minInput.attr("max",v("ngModelRange - (buffer / 2)")),x.maxInput.attr("step",v("inputSteps()")),x.maxInput.attr("min",v("ngModel + (buffer / 2)")),x.maxInput.attr("max",v("ceiling")),x.maxInput.css(E),x.selInput.attr("step",v("inputSteps()")),x.selInput.attr("min",v("ngModel")),x.selInput.attr("max",v("ngModelRange")),x.selInput.css(E)):(x.minInput.attr("max",v("ceiling")),x.minInput.css({width:"100%"}),x.maxInput.remove(),x.selInput.remove())}else x.minInput.remove(),x.maxInput.remove(),x.selInput.remove();if(r(x.stepBubs.children().eq(0),v("translation(step)")),r(x.ceilBub,v("translation(ceiling)")),r(x.flrBub,v("translation(floor)")),r(x.selBub,v("rangeTranslation("+y+","+z+")")),r(x.lowBub,v("translation("+y+")")),r(x.highBub,v("translation("+z+")")),r(x.cmbBub,v("combinedTranslation("+y+","+z+")")),w)B.push(z),B.unshift("buffer");else for(var F=[x.selBar,x.unSelBarLow,x.unSelBarHigh,x.maxPtr,x.selBub,x.highBub,x.cmbBub],G=0,H=F.length;H>G;G++)c=F[G],c.remove();return B.unshift("precision",j),g||x.stepBubs.children().remove(),{post:function(c,f,g,r){function S(){if(angular.forEach(B,function(a){c[a]=parseFloat(c[a]),a==y||a==z?c[a]=s(c[a],c.precision,c[j],c.floor,c.ceiling):"buffer"==a?!c.buffer||isNaN(c.buffer)||c.buffer<0?c.buffer=0:c.buffer=u(c[j],c.buffer):"precision"==a?!c.precision||isNaN(c.precision)?c.precision=0:c.precision=parseInt(c.precision):a==j?!c[j]||isNaN(c[j])?c[j]=1/Math.pow(10,c.precision):c[j]=parseFloat(c[j].toFixed(c.precision)):"stickiness"==a&&(isNaN(c.stickiness)?c.stickiness=e:c.stickiness<1&&(c.stickiness=1)),c.decodedValues[a]=c.decodeRef(a)}),w){if(c[z]<c[y]){var a=c[z];c[z]=c[y],c[y]=a}var b=s(c[z]-c[y],c.precision,c[j]);if(c.buffer>0&&b<c.buffer){var d=c.encode((c.decodedValues[y]+c.decodedValues[z])/2);c[y]=s(d-c.buffer/2,c.precision,c[j],c.floor,c.ceiling),c[z]=c[y]+c.buffer,c[z]>c.ceiling&&(c[z]=c.ceiling,c[y]=c.ceiling-c.buffer)}}x=n(v.fullBar),E=o(v.minPtr),F=p(v.fullBar),G=F+x-n(v.minPtr),H=G-F,I=c.floor,J=c.decodedValues.floor,K=c.ceiling,L=c.decodedValues.ceiling,M=K-I,N=L-J,O=t(N,c.decodedValues[j])}function T(){function C(a){return(a-F)/H*100}function D(a){return C(a)/100*N+J}function L(a){return c.encode(D(a))}function V(a){var b=a-J;return M==N?b=t(b,c.decodedValues[j])/O:b/=N,100*b}function W(a){return V(c.decode(a))}function X(a){return i(a*H/100)}function Y(a){return Math.min(Math.max(a,F),G)}function Z(a){return m(a,X(C(Y(p(a)))))}function $(a,b,d){var e=a>0?1:-1;return b=b?b:100,d?(Math.sin(Math.min(Math.abs(a/b),1)*Math.PI-Math.PI/2)+1)*e*b/6:e*Math.pow(Math.min(Math.abs(a/b*2),1),c.stickiness)*b/2}function _(){var a=V(c.decodedValues[y]),b=W(c[y]+c[j])-a,d=a-W(c[y]-c[j]),e=W(c[y]+c.buffer)-a,f=C(E+F),g=a+$(P,P>0?b:d);if(m(v.minPtr,X(g)),m(v.lowBub,X(C(p(v.minPtr)-o(v.lowBub)+E))),w){var h=V(c.decodedValues[z]),i=W(c[z]+c[j])-h,k=h-W(c[z]-c[j]),l=h-W(c[z]-c.buffer),n=h+$(Q,Q>0?i:k);if(g>h-l&&(g=a+$(P,e,!0),m(v.minPtr,X(g)),m(v.lowBub,X(C(p(v.minPtr)-o(v.lowBub)+E)))),a+e>n&&(n=h+$(Q,l,!0)),m(v.maxPtr,X(n)),m(v.highBub,X(C(p(v.maxPtr)-o(v.highBub)+E))),m(v.selBar,X(g+f)),v.selBar.css({width:X(n-g)}),m(v.selBub,X((g+n)/2-C(o(v.selBub)+F)+f)),m(v.cmbBub,X((g+n)/2-C(o(v.cmbBub)+F)+f)),v.unSelBarLow.css({left:0,width:X(g+f)}),m(v.unSelBarHigh,X(n+f)),v.unSelBarHigh.css({right:0}),AngularSlider.inputtypes.range){var q=2*f,r=g+e/2,s=100-r;r+=q;var t=n-l/2,u=g+q,x=n-g-q;g+q>=n&&(u=g,x=n+q-g),v.minInput.css({width:X(t)}),v.maxInput.css({left:X(r),width:X(s)}),v.selInput.css({left:X(u),width:X(x)})}}}function aa(){var a=v.lowBub;Z(v.lowBub),w&&(Z(v.highBub),Z(v.selBub),q(v.lowBub,v.highBub)<10?(k(v.lowBub),k(v.highBub),l(v.cmbBub),Z(v.cmbBub),a=v.cmbBub):(l(v.lowBub),l(v.highBub),k(v.cmbBub),a=v.highBub)),q(v.flrBub,v.lowBub)<5?k(v.flrBub):w&&q(v.flrBub,a)<5?k(v.flrBub):l(v.flrBub),q(v.lowBub,v.ceilBub)<5?k(v.ceilBub):w&&q(a,v.ceilBub)<5?k(v.ceilBub):l(v.ceilBub)}function ba(b){P=0,Q=0,u&&(_(),aa(),u.removeClass("active")),angular.element(b.target).css({"z-index":1}),u=null,B=null,a=!1}function ca(b){u&&c.$apply(function(){var d=b.clientX||b.x;if(a){var h=L(d)-e,i=L(d)+g;I>h?(i+=I-h,h=I):i>K&&(h-=i-K,i=K);var k=W(h),l=W(i);P=k,Q=l,c[y]=h=s(h,c.precision,c[j],c.floor,c.ceiling),c[z]=i=s(i,c.precision,c[j],c.floor,c.ceiling),P-=W(h),Q-=W(i)}else{var m=Y(d+F-p(f)-o(u)),n=C(m),q=c.encode(J+N*n/100);if(P=n,w)if(c.buffer>0)B===y?q>c[z]-c.buffer&&(q=c[z]-c.buffer):q<c[y]+c.buffer&&(q=c[y]+c.buffer);else if(B===y){if(q>c[z]){c[y]=c[z],c.decodedValues[y]=c.decodeRef(y),B=z;var t=v.minPtr;v.minPtr=v.maxPtr,v.maxPtr=t,v.maxPtr.removeClass("active").removeClass("high").addClass("low"),v.minPtr.addClass("active").removeClass("low").addClass("high")}}else if(q<c[y]){c[z]=c[y],c.decodedValues[z]=c.decodeRef(z),B=y;var t=v.minPtr;v.minPtr=v.maxPtr,v.maxPtr=t,v.minPtr.removeClass("active").removeClass("low").addClass("high"),v.maxPtr.addClass("active").removeClass("high").addClass("low")}c[B]=q=s(q,c.precision,c[j],c.floor,c.ceiling),c.decodedValues[B]=c.decodeRef(B),B===y?(P-=W(q),Q=0):(Q=P-W(q),P=0)}c.ngChange&&c.ngChange(),r.$setViewValue(c[y]),_(),aa()})}function da(b,d,f){if(!c.ngDisabled||1!=c.ngDisabled){b.preventDefault();var h=b.clientX||b.x;if(u=d,B=f,u.addClass("active"),angular.element(b.target).css({"z-index":2}),B==A){a=!0;var i=L(h);e=i-c[y],g=c[z]-i}ca(b)}}function ea(){function a(a,b,c){function e(a,d){da(d,b,c)}function f(a,b){ca(b),ba(b)}a=h(a),d.bind(a,{start:e,move:function(a,b){ca(b)},end:f,cancel:function(a,b){ba(b)}})}function c(a,b,c){a=h(a),c=angular.isUndefined(c)?a:h(c),d.bind(a,{start:function(a,d){da(d,c,b)}})}function e(a){a=h(a),d.bind(a,{move:function(a,b){ca(b)},end:function(a,b){ca(b),ba(b)},cancel:function(a,b){ba(b)}})}AngularSlider.inputtypes.range?(a(v.minInput,v.minPtr,y),w&&(a(v.maxInput,v.maxPtr,z),a(v.selInput,v.selBar,A))):(e(b),c(v.minPtr,y),c(v.lowBub,y),c(v.flrBub,y,v.minPtr),w?(c(v.maxPtr,z),c(v.highBub,z),c(v.ceilBub,z,v.maxPtr),c(v.selBar,A),c(v.selBub,A,v.selBar),c(v.unSelBarLow,y,v.minPtr),c(v.unSelBarHigh,z,v.maxPtr)):(c(v.ceilBub,y,v.minPtr),c(v.fullBar,y,v.minPtr)))}var a,e,g,u,B;S(),m(v.flrBub,0),m(v.ceilBub,i(x-n(v.ceilBub))),_(),aa(),R||(ea(),R=!0)}var v=D(C(f),w,AngularSlider.inputtypes.range);c.decodedValues={floor:0,ceiling:0,step:0,stepWidth:0,precision:0,buffer:0,stickiness:0,ngModel:0,ngModelRange:0},c.translation=function(a){return a=parseFloat(a).toFixed(c.precision),angular.isUndefined(g.translateFn)?""+a:c.translateFn({value:a})},c.rangeTranslation=function(a,b){return angular.isUndefined(g.translateRangeFn)?"Range: "+c.translation((b-a).toFixed(c.precision)):c.translateRangeFn({low:a,high:b})},c.combinedTranslation=function(a,b){return angular.isUndefined(g.translateCombinedFn)?c.translation(a)+" - "+c.translation(b):c.translateCombinedFn({low:a,high:b})},c.encode=function(a){return angular.isUndefined(g.scaleFn)||""==g.scaleFn?a:c.scaleFn({value:a})},c.decode=function(a){return angular.isUndefined(g.inverseScaleFn)||""==g.inverseScaleFn?a:c.inverseScaleFn({value:a})},(1!=Math.round(c.encode(c.decode(1)))||100!=Math.round(c.encode(c.decode(100))))&&console.warn("The scale and inverseScale functions are not perfect inverses: 1 = "+c.encode(c.decode(1))+"  100 = "+c.encode(c.decode(100))),c.decodeRef=function(a){return c.decode(c[a])},c.inputSteps=function(){return Math.pow(10,-1*c.precision)};for(var x=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=1,P=0,Q=0,R=!1,U=0;U<B.length;U++)c.$watch(B[U],function(){T()});h(window).bind("resize",function(){T()}),c.$on("refreshSlider",function(){a(function(){T()})}),a(function(){T()})}}}}}]);
